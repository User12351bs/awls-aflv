<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar - Ureshii Anime</title>
    <link rel="stylesheet" href="index.css">
    <link rel="icon" href="logo.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ureshii Anime">
    <script src="glob/localstorage.js"></script>
    <script src="animes.js"></script>
    <link rel="stylesheet" href="glob/header.css">
    <script src="glob/header.js"></script>
    <link rel="stylesheet" href="glob/cards.css">
    <script src="glob/cards.js"></script>
        <style>
            .search-container {
                margin: 2rem auto;
                width: 100%;
                max-width: 800px;
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
                padding: 0 1rem;
                box-sizing: border-box;
            }
            
            .search-input-container {
                display: flex;
                position: relative;
                border-bottom: 2px solid #FF6B00;
                background-color: transparent !important; /* Forzar transparencia */
                padding: 0.5rem 0;
                transition: all 0.3s ease;
                width: 100%;
                margin: 0 auto;
                box-shadow: none;
                border-radius: 8px 8px 0 0;
                overflow: visible;
            }
            
            .search-input-container.focused {
                box-shadow: none;
                border-color: #FF9D4D;
            }
            
            .search-input {
                flex: 1;
                padding: 0.8rem 0;
                border: none;
                background-color: transparent !important; /* Forzar transparencia también en el input */
                color: var(--text-color);
                font-size: 1.2rem;
                outline: none;
                width: calc(100% - 2.5rem);
            }
            
            .clear-button {
                position: absolute;
                right: 40px; /* Ajustado desde 0 para moverlo a la izquierda */
                top: 50%;
                transform: translateY(-50%);
                width: 24px;
                height: 24px;
                background-color: transparent;
                color: #888;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                opacity: 0;
                visibility: hidden;
                transition: all 0.2s ease;
                border-radius: 0;
            }
            
            .clear-button.visible {
                opacity: 1;
                visibility: visible;
            }
            
            .clear-button:hover {
                color: #FF9D4D;
            }
            
            .empty-message {
                text-align: center;
                padding: 2rem 1rem 0.5rem 1rem;
                color: #aaa;
                font-size: 1.2rem;
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
            }
            
            .support-message {
                text-align: center;
                color: var(--text-color-secondary);
                font-size: 0.9rem;
                line-height: 1.4;
                padding: 0 1rem 1rem 1rem;
                box-sizing: border-box;
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
                margin-top: -1rem; /* Añadir margen negativo para acercarlo al mensaje vacío */
            }
            
            /* Añadir esta regla para cuando el grid contiene mensajes de error - fuera de media query */
            .anime-grid.empty-results {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                min-height: 300px;
            }
            
            .support-message a {
                color: var(--primary-color);
                text-decoration: none;
                font-weight: bold;
            }
            
            .support-message a:hover {
                text-decoration: underline;
            }
            
            @media (max-width: 768px) {
                .anime-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr) !important;
                    gap: 0.8rem;
                    padding: 0 0.5rem;
                    width: 100%;
                    max-width: 100vw;
                    box-sizing: border-box;
                    overflow-x: hidden;
                }
                
                /* Eliminar la regla empty-results de aquí ya que ahora está fuera de la media query */
                
                .search-container {
                    margin: 1.5rem auto;
                    padding: 0 1.5rem;
                }
                
                .support-message {
                    padding: 0 1.5rem;
                }
            }
            
            /* Media query para pantallas grandes */
            @media screen and (min-width: 1600px) {
                .search-container {
                    max-width: 1000px;
                    margin: 3rem auto;
                    gap: 2rem;
                }
                
                .search-input-container {
                    padding: 0.8rem 0;
                    border-bottom: 3px solid #FF6B00;
                }
                
                .search-input {
                    font-size: 1.6rem;
                    padding: 1rem 0;
                }
                
                .clear-button {
                    width: 32px;
                    height: 32px;
                }
                
                .empty-message {
                    font-size: 1.6rem;
                    padding: 3rem 1rem 1rem 1rem;
                    max-width: 800px;
                }
                
                .support-message {
                    font-size: 1.2rem;
                    max-width: 800px;
                    line-height: 1.6;
                }
                
                .anime-grid {
                    grid-template-columns: repeat(6, 1fr);
                    gap: 2rem;
                }
            }

            /* Estilos para el icono de filtro */
            .filter-icon {
                width: 24px;
                height: 24px;
                fill: #888; /* Color gris */
                cursor: pointer;
                margin-left: 10px;
                display: flex;
                align-items: center;
                align-self: center; /* Centra verticalmente el icono */
                transition: fill 0.3s ease;
            }
            
            .filter-icon:hover {
                fill: #bbb; /* Color más claro al hacer hover */
            }
            
            /* Estilos para el dropdown de filtros */
            .filter-dropdown {
                display: none;
                position: absolute !important;
                right: 0;
                top: 100% !important; /* Cambiado de 45px a 100% */
                background-color: var(--card-color);
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                z-index: 100 !important;
                min-width: 200px;
                padding: 15px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                margin-top: 10px !important; /* Aumentado de 5px a 10px */
            }
            
            /* Añadir posición relativa al contenedor del icono de filtro */
            .search-input-container {
                display: flex;
                position: relative;
                border-bottom: 2px solid #FF6B00;
                background-color: transparent !important;
                padding: 0.5rem 0;
                transition: all 0.3s ease;
                width: 100%;
                margin: 0 auto;
                box-shadow: none;
                border-radius: 8px 8px 0 0;
                overflow: visible;
            }
            
            /* Añadir posición relativa al icono de filtro */
            .filter-icon {
                width: 24px;
                height: 24px;
                fill: #888;
                cursor: pointer;
                margin-left: 10px;
                display: flex;
                align-items: center;
                align-self: center;
                transition: fill 0.3s ease;
                position: relative; /* Añadido posición relativa */
            }
            .filter-section {
                margin-bottom: 15px;
            }
            
            .filter-section:last-child {
                margin-bottom: 0;
            }
            
            .filter-title {
                margin: 0 0 10px 0;
                color: var(--text-color);
                font-size: 14px;
                font-weight: 600;
            }
            
            .filter-options {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }
            
            .filter-option {
                color: var(--text-color);
                display: flex;
                align-items: center;
                font-size: 14px;
                cursor: pointer;
                transition: color 0.3s ease;
            }
            
            .filter-option:hover {
                color: #FF9D4D;
            }
            
            .filter-option input {
                margin-right: 8px;
                cursor: pointer;
            }
            
            /* Adaptación para resoluciones grandes */
            @media screen and (min-width: 1600px) {
                .filter-icon {
                    width: 32px;
                    height: 32px;
                    margin-left: 15px;
                }
                
                .filter-dropdown {
                    top: 50px;
                    min-width: 250px;
                    padding: 20px;
                    border-radius: 10px;
                }
                
                .filter-title {
                    font-size: 18px;
                    margin-bottom: 15px;
                }
                
                .filter-option {
                    font-size: 16px;
                    padding: 3px 0;
                }
                
                .filter-options {
                    gap: 12px;
                }
            }
        </style>
</head>
<body>
    <header>
        <div class="menu-button" id="menu-toggle">
            <svg class="menu-ab-svg--wDGx3 header-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-t="menu-svg" aria-hidden="true" role="img"><path class="menu-ab-svg__top--Xgjtj" d="M20 5H4V7H20V5Z"></path><path class="menu-ab-svg__middle--vsB5D" d="M4 11H20V13H4V11Z"></path><path class="menu-ab-svg__bottom--6yklx" d="M20 17H4V19H20V17Z"></path></svg>
        </div>
        <a href="index.html" class="header-logo">
            <picture>
                <source media="(max-width: 768px)" srcset="logo.png">
                <source media="(min-width: 769px)" srcset="horizontal-logo.png">
                <img src="horizontal-logo.png" alt="Ureshii Anime" class="logo-img">
            </picture>
        </a>
        <div class="nav-categories">
            <a href="index.html" class="nav-category">Catálogo</a>
            <a href="novedades.html" class="nav-category">Novedades</a>
        </div>
        <div class="header-buttons">
            <a href="search.html" class="header-button">
                <svg class="header-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-t="search-svg" aria-hidden="true" role="img"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 19C12.4879 19 14.3164 18.3176 15.7641 17.1742L21.2927 22.7069L22.7074 21.2931L17.1778 15.7595C18.319 14.3126 19 12.4858 19 10.5C19 5.80558 15.1944 2 10.5 2C5.80558 2 2 5.80558 2 10.5C2 15.1944 5.80558 19 10.5 19ZM10.5 17C14.0899 17 17 14.0899 17 10.5C17 6.91015 14.0899 4 10.5 4C6.91015 4 4 6.91015 4 10.5C4 14.0899 6.91015 17 10.5 17Z"></path></svg>
            </a>
            <a href="ureshiilists.html" class="header-button">
                <svg class="header-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-t="watchlist-svg" aria-hidden="true" role="img"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.0001 20.5858C19.0001 21.4767 17.9229 21.9229 17.293 21.2929L12.0001 16L6.7071 21.2929C6.07714 21.9229 5 21.4767 5 20.5858L5.00006 3H19.0001V20.5858ZM7.00001 18.1716L7.00006 5H17.0001V18.1716L12.0001 13.1716L7.00001 18.1716Z"></path></svg>
            </a>
            <a href="account.html" class="export-button" id="export-import-button">
                <svg class="header-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-t="user-settings-svg" aria-hidden="true" role="img"><path d="M12 20a6.01 6.01 0 0 1-5.966-5.355L12 12.088l5.966 2.557A6.01 6.01 0 0 1 12 20m0-16c1.654 0 3 1.346 3 3s-1.345 3-2.999 3h-.002A3.003 3.003 0 0 1 9 7c0-1.654 1.346-3 3-3m7.394 9.081l-4.572-1.959A4.997 4.997 0 0 0 17 7c0-2.757-2.243-5-5-5S7 4.243 7 7c0 1.71.865 3.22 2.178 4.122l-4.572 1.959A.999.999 0 0 0 4 14c0 4.411 3.589 8 8 8s8-3.589 8-8c0-.4-.238-.762-.606-.919"></path></svg>
            </a>
        </div>
    </header>

    <div class="container">
        <!-- Se eliminó el título "Buscar Anime" -->
        
        <div class="search-container">
            <div class="search-input-container" id="search-container">
                <input type="text" id="search-input" class="search-input" placeholder="Buscar...">
                <div class="clear-button" id="clear-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M13.414 12l5.293-5.293a.999.999 0 1 0-1.414-1.414L12 10.586 6.707 5.293a.999.999 0 1 0-1.414 1.414L10.586 12l-5.293 5.293a.999.999 0 0 0 0 1.414.993.993 0 0 0 1.414 0L12 13.414l5.293 5.293a.999.999 0 1 0 1.414-1.414L13.414 12z"></path>
                    </svg>
                </div>
                <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-t="filter-svg" aria-hidden="true" role="img">
                    <path fill-rule="evenodd" d="M9 5c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2M3 8a1 1 0 0 1 0-2h2.142c.447-1.72 2-3 3.858-3s3.411 1.28 3.858 3H21a1 1 0 0 1 0 2h-8.142c-.447 1.72-2 3-3.858 3S5.589 9.72 5.142 8H3zm12 11c1.103 0 2-.897 2-2s-.897-2-2-2-2 .897-2 2 .897 2 2 2zm6-3a1 1 0 0 1 0 2h-2.142c-.447 1.72-2 3-3.858 3s-3.411-1.28-3.858-3H3a1 1 0 0 1 0-2h8.142c.447-1.72 2-3 3.858-3s3.411 1.28 3.858 3H21z"></path>
                </svg>
                <div class="filter-dropdown" id="filter-dropdown">
                    <div class="filter-section">
                        <h4 class="filter-title">Idioma:</h4>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="radio" name="language" value="all" checked> Todo
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="language" value="sub"> Subtitulado
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="language" value="dub"> Doblado
                            </label>
                        </div>
                    </div>
                    <div class="filter-section">
                        <h4 class="filter-title">Edad:</h4>
                        <div class="filter-options">
                            <label class="filter-option">
                                <input type="radio" name="age" value="all" checked> All
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="age" value="12"> +12
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="age" value="14"> +14
                            </label>
                            <label class="filter-option">
                                <input type="radio" name="age" value="16"> +16
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Eliminamos el mensaje de soporte de aquí -->
        </div>
        
        <div class="anime-grid" id="anime-grid"></div>
    </div>

    <!-- Modal para exportar/importar datos -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-content-container"></div>
        </div>
    </div>

    <script>
        // Cargar datos del localStorage
        const watchedEpisodes = JSON.parse(localStorage.getItem(WATCHED_EPISODES_KEY)) || {};
        const watchingAnimes = JSON.parse(localStorage.getItem(WATCHING_ANIMES_KEY)) || [];

        animeData.forEach(anime => {
            anime.inMyList = window.myList.includes(anime.id);
            anime.inFavorites = window.favorites.includes(anime.id);
        });
        
        // Variables para la búsqueda
        let searchQuery = '';
        let searchTimeout = null;
        
        // Elementos del DOM
        const searchInput = document.getElementById('search-input');
        const searchContainer = document.getElementById('search-container');
        const clearButton = document.getElementById('clear-button');
        const animeGrid = document.getElementById('anime-grid');
        
        // Variables para los filtros
        let selectedLanguage = 'all';
        let selectedAge = 'all';
        
        // Manejar el clic en el icono de filtro
        const filterIcon = document.querySelector('.filter-icon');
        const filterDropdown = document.getElementById('filter-dropdown');
        
        // Inicializar el estado del dropdown
        filterDropdown.style.display = 'none';
        
        filterIcon.addEventListener('click', function(e) {
            e.stopPropagation();
            if (filterDropdown.style.display === 'none' || filterDropdown.style.display === '') {
                filterDropdown.style.display = 'block';
            } else {
                filterDropdown.style.display = 'none';
            }
        });
        
        // Cerrar el dropdown al hacer clic fuera de él
        document.addEventListener('click', function(e) {
            if (!filterDropdown.contains(e.target) && e.target !== filterIcon) {
                filterDropdown.style.display = 'none';
            }
        });
        
        // Manejar los cambios en los filtros
        document.querySelectorAll('input[name="language"]').forEach(radio => {
            radio.addEventListener('change', function() {
                selectedLanguage = this.value;
                applyFilters();
            });
        });
        
        document.querySelectorAll('input[name="age"]').forEach(radio => {
            radio.addEventListener('change', function() {
                selectedAge = this.value;
                applyFilters();
            });
        });
        
        // Función para aplicar los filtros
        function applyFilters() {
            searchQuery = searchInput.value.trim();
            displayFilteredAnimes();
        }
        
        // Función para obtener el número de cards por hilera según el tamaño de pantalla
        function getCardsPerRow() {
            if (window.innerWidth <= 768) {
                return 2; // Móvil: 2 cards por fila
            } else if (window.innerWidth <= 1024) {
                return 4; // Tablet: 4 cards por fila
            } else if (window.innerWidth <= 1600) {
                return 5; // Resoluciones medianas: 5 cards por fila
            } else {
                return 6; // Pantallas grandes: 6 cards por fila
            }
        }
        
        // Modificar la función displayFilteredAnimes para incluir los filtros
        function displayFilteredAnimes() {
            // Limpiar el contenedor
            animeGrid.innerHTML = '';
            
            // Filtrar animes según la búsqueda y los filtros
            let filteredAnimes = animeData;
            
            if (searchQuery) {
                const query = searchQuery.toLowerCase();
                filteredAnimes = filteredAnimes.filter(anime => {
                    return anime.title.toLowerCase().includes(query) ||
                           (anime.alternativeTitles && anime.alternativeTitles.some(title => title.toLowerCase().includes(query)));
                });
            } else {
                // Si no hay búsqueda, mostrar solo 2 hileras de cards aleatorias
                const cardsPerRow = getCardsPerRow();
                const maxCards = cardsPerRow * 2; // 2 hileras
                
                // Crear una copia del array y mezclarla aleatoriamente
                const shuffledAnimes = [...animeData].sort(() => Math.random() - 0.5);
                filteredAnimes = shuffledAnimes.slice(0, maxCards);
            }
            
            // Aplicar filtro de idioma
            if (selectedLanguage !== 'all') {
                filteredAnimes = filteredAnimes.filter(anime => {
                    if (selectedLanguage === 'sub') {
                        return anime.subtitled; // Asumiendo que existe esta propiedad
                    } else if (selectedLanguage === 'dub') {
                        return anime.dubbed; // Asumiendo que existe esta propiedad
                    }
                    return true;
                });
            }
            
            // Aplicar filtro de edad
            if (selectedAge !== 'all') {
                const ageValue = parseInt(selectedAge);
                filteredAnimes = filteredAnimes.filter(anime => {
                    if (!anime.contentRating) return false;
                    // Extraer el número de la clasificación (por ejemplo, "+14" -> 14)
                    const animeAgeRating = parseInt(anime.contentRating.replace('+', ''));
                    return animeAgeRating == ageValue;
                });
            }
            
            // Mostrar mensaje si no hay resultados
            if (filteredAnimes.length === 0) {
                // Cambiar la clase del grid para usar flex en lugar de grid
                animeGrid.className = 'anime-grid empty-results';
                
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'empty-message';
                
                // Añadir el SVG grande encima del texto
                const emptySvg = document.createElement('div');
                emptySvg.innerHTML = `
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-t="error-svg" aria-hidden="true" role="img" style="width: 120px; height: 120px; margin-bottom: 20px; fill: #aaa;">
                        <path d="M12.049 17.984l.9 2.7a.999.999 0 0 1-.95 1.317c-.418 0-.808-.265-.948-.684l-.9-2.7a1.847 1.847 0 0 0-2.334-1.168l-2.701.9a1 1 0 0 1-.632-1.897l2.7-.9a3.85 3.85 0 0 1 4.865 2.432zm9.9-6.3a1 1 0 0 1-.632 1.265l-2.701.9a1.848 1.848 0 0 0-1.167 2.335l.9 2.7a.999.999 0 0 1-.95 1.317c-.418 0-.808-.265-.948-.684l-.9-2.7a3.85 3.85 0 0 1 2.433-4.865l2.7-.9a.998.998 0 0 1 1.265.632zm-13.5-4.5a3.85 3.85 0 0 1-2.432 4.865l-2.7.9a.999.999 0 0 1-1.265-.632.999.999 0 0 1 .632-1.265l2.7-.9a1.85 1.85 0 0 0 1.168-2.335l-.9-2.7a1 1 0 1 1 1.897-.633l.9 2.7zm3.502-1.167l-.9-2.7a.999.999 0 0 1 .632-1.265 1 1 0 0 1 1.266.632l.9 2.7a1.85 1.85 0 0 0 2.334 1.168l2.701-.9a1 1 0 0 1 .632 1.897l-2.7.9a3.832 3.832 0 0 1-1.213.198 3.854 3.854 0 0 1-3.652-2.63z"></path>
                    </svg>
                `;
                
                emptyMessage.appendChild(emptySvg);
                
                // Añadir el texto del mensaje después del SVG
                const messageText = document.createElement('div');
                messageText.innerHTML = 'No se encontraron animes que coincidan con tu búsqueda.';
                emptyMessage.appendChild(messageText);
                
                animeGrid.appendChild(emptyMessage);
                
                // Añadir mensaje de soporte solo cuando no hay resultados
                const supportMessage = document.createElement('div');
                supportMessage.className = 'support-message';
                supportMessage.innerHTML = 'Si <strong style="color: var(--primary-color); font-weight: normal;">no encuentras tu anime</strong> en nuestra página, puedes abrir un ticket en nuestro <a href="support.html">centro de soporte</a> y <strong style="color: var(--primary-color); font-weight: normal;">en menos de 24h</strong> tendrás tu anime disponible en nuestra página.';
                animeGrid.appendChild(supportMessage);
                
                return;
            }
            
            // Asegurarse de que el grid tenga la clase correcta cuando hay resultados
            animeGrid.className = 'anime-grid';
            
            // Mostrar los animes filtrados
            filteredAnimes.forEach(anime => {
                const card = createAnimeCard(anime);
                animeGrid.appendChild(card);
            });
        }
        
        // Función para actualizar la visibilidad del botón de limpiar
        function updateClearButtonVisibility() {
            if (searchInput.value.trim() !== '') {
                clearButton.classList.add('visible');
            } else {
                clearButton.classList.remove('visible');
            }
        }
        
        // Evento para el input de búsqueda (búsqueda automática)
        searchInput.addEventListener('input', () => {
            updateClearButtonVisibility();
            
            // Cancelar el timeout anterior si existe
            if (searchTimeout) {
                clearTimeout(searchTimeout);
            }
            
            // Establecer un nuevo timeout para la búsqueda (300ms después de dejar de escribir)
            searchTimeout = setTimeout(() => {
                searchQuery = searchInput.value.trim();
                displayFilteredAnimes();
            }, 300);
        });
        
        // Eventos para el focus del input (iluminación dinámica)
        searchInput.addEventListener('focus', () => {
            searchContainer.classList.add('focused');
        });
        
        searchInput.addEventListener('blur', () => {
            searchContainer.classList.remove('focused');
        });
        
        // Evento para el botón de limpiar
        clearButton.addEventListener('click', () => {
            searchInput.value = '';
            searchQuery = '';
            updateClearButtonVisibility();
            displayFilteredAnimes();
            searchInput.focus();
        });
        
        // Evento para buscar al presionar Enter
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchQuery = searchInput.value.trim();
                displayFilteredAnimes();
            }
        });
        
        // Evento para detectar cambios en el tamaño de la ventana
        window.addEventListener('resize', () => {
            // Solo actualizar si no hay búsqueda activa (para mantener las 2 hileras)
            if (!searchQuery) {
                displayFilteredAnimes();
            }
        });
        
        // Mostrar todos los animes al cargar la página
        window.addEventListener('load', () => {
            // Cargar datos desde Google Drive si está disponible
            if (typeof window.loadInitialDataFromDrive === 'function') {
                window.loadInitialDataFromDrive();
            }
            
            // Actualizar episodios lanzados
            updateReleasedEpisodes();
            displayFilteredAnimes();
            updateClearButtonVisibility();
        });
        
        // Escuchar cuando los datos de Drive estén listos
        window.addEventListener('driveDataReady', function(event) {
            console.log('Datos de Google Drive cargados en search.html:', event.detail);
            // Recargar contenido que dependa de los datos
            displayFilteredAnimes();
        });
    </script>
</body>
</html>
